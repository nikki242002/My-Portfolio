<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        /* Custom scrollbar */
        .dark ::-webkit-scrollbar { width: 12px; }
        .dark ::-webkit-scrollbar-track { background: #1a202c; }
        .dark ::-webkit-scrollbar-thumb { background-color: #4a5568; border-radius: 20px; border: 3px solid #1a202c; }
        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background-color: #a0aec0; border-radius: 20px; border: 3px solid #f1f1f1; }

        .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        
        .modal-backdrop { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.5); z-index: 40; align-items: center; justify-content: center; }
        .modal-content { max-height: 90vh; overflow-y: auto; }

        /* Animated RGB Border for Profile Picture */
        @keyframes rotate {
            100% { transform: rotate(1turn); }
        }
        .rgb-border {
            position: relative;
            z-index: 0;
            border-radius: 9999px;
            overflow: hidden;
            padding: 3px; /* Controls border thickness */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .rgb-border::before {
            content: '';
            position: absolute;
            z-index: -1;
            inset: -10px;
            background: conic-gradient(from 180deg at 50% 50%, #f72585 0deg, #b5179e 60deg, #7209b7 120deg, #560bad 180deg, #480ca8 240deg, #3a0ca3 300deg, #f72585 360deg);
            animation: rotate 4s linear infinite;
        }

        /* Waving hand animation */
        @keyframes wave {
            0%, 60%, 100% { transform: rotate(0deg); }
            10%, 30% { transform: rotate(14deg); }
            20% { transform: rotate(-8deg); }
            40% { transform: rotate(-4deg); }
            50% { transform: rotate(10deg); }
        }
        .waving-hand {
            display: inline-block;
            animation: wave 2.5s infinite;
            transform-origin: 70% 70%;
        }
        
        /* Theme Colors */
        :root {
            --primary-color-light: 600;
            --primary-color-dark: 400;
            --color-primary: 224 71% 58%; /* Default to Indigo */
        }
        .theme-indigo { --color-primary: 224 71% 58%; --bg-light: 220 29% 97%; --bg-dark: 224 15% 15%; }
        .theme-teal { --color-primary: 162 71% 58%; --bg-light: 160 50% 97%; --bg-dark: 162 25% 15%;}
        .theme-rose { --color-primary: 341 71% 58%; --bg-light: 340 100% 98%; --bg-dark: 341 15% 15%;}
        .theme-amber { --color-primary: 43 71% 58%; --bg-light: 45 60% 97%; --bg-dark: 38 25% 15%;}
        .theme-violet { --color-primary: 262 80% 60%; --bg-light: 260 100% 98%; --bg-dark: 262 25% 15%; }
        .theme-slate { --color-primary: 215 28% 40%; --bg-light: 220 15% 97%; --bg-dark: 220 10% 15%; }

        .theme-bg { background-color: hsl(var(--bg-light) / 1); }
        .dark .theme-bg { background-color: hsl(var(--bg-dark) / 1); }

        .text-primary { color: hsl(var(--color-primary) / 1); }
        .bg-primary { background-color: hsl(var(--color-primary) / 1); }
        .hover\:bg-primary-dark:hover { background-color: hsl(var(--color-primary) / 0.9); }
        .focus\:ring-primary:focus { --tw-ring-color: hsl(var(--color-primary) / 1); }
    </style>
</head>
<body class="theme-bg text-gray-800 dark:text-gray-200 transition-all duration-300">

    <!-- Header & Navbar -->
    <header id="header" class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg fixed top-0 left-0 right-0 z-30 shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-primary">Nitin Sharma</a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#home" class="hover:text-primary">Home</a>
                <a href="#about" class="hover:text-primary">About</a>
                <a href="#skills" class="hover:text-primary">Skills</a>
                <a href="#projects" class="hover:text-primary">Projects</a>
                <a href="#achievements" class="hover:text-primary">Achievements</a>
                <a href="#contact" class="hover:text-primary">Contact</a>
            </div>
            <div class="flex items-center space-x-2">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                    <i data-lucide="sun" id="theme-icon-light" class="hidden"></i>
                    <i data-lucide="moon" id="theme-icon-dark" class="hidden"></i>
                </button>

                <!-- Theme Customizer Dropdown -->
                <div class="relative">
                    <button id="theme-customizer-button" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i data-lucide="palette"></i>
                    </button>
                    <div id="theme-customizer-menu" class="hidden absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 z-40">
                        <p class="font-semibold mb-2">Change Theme Color</p>
                        <div class="grid grid-cols-4 gap-2 mb-4">
                            <button data-theme="theme-indigo" class="w-10 h-10 rounded-full bg-indigo-500 focus:ring-2 ring-offset-2 dark:ring-offset-gray-800 ring-indigo-500"></button>
                            <button data-theme="theme-teal" class="w-10 h-10 rounded-full bg-teal-500 focus:ring-2 ring-offset-2 dark:ring-offset-gray-800 ring-teal-500"></button>
                            <button data-theme="theme-rose" class="w-10 h-10 rounded-full bg-rose-500 focus:ring-2 ring-offset-2 dark:ring-offset-gray-800 ring-rose-500"></button>
                            <button data-theme="theme-amber" class="w-10 h-10 rounded-full bg-amber-500 focus:ring-2 ring-offset-2 dark:ring-offset-gray-800 ring-amber-500"></button>
                             <button data-theme="theme-violet" class="w-10 h-10 rounded-full bg-violet-500 focus:ring-2 ring-offset-2 dark:ring-offset-gray-800 ring-violet-500"></button>
                            <button data-theme="theme-slate" class="w-10 h-10 rounded-full bg-slate-500 focus:ring-2 ring-offset-2 dark:ring-offset-gray-800 ring-slate-500"></button>
                        </div>
                        <div class="flex items-center gap-2 mb-4">
                            <label for="custom-color-picker" class="font-semibold">Custom:</label>
                            <input type="color" id="custom-color-picker" value="#4f46e5" class="w-10 h-10 rounded-full">
                        </div>
                        <p class="font-semibold mb-2">Hero Background</p>
                        <div class="space-y-2">
  <button data-bg="default" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">None</button>
                            <button data-bg="Tech Workspace" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">Tech Workspace</button>
                            <button data-bg="Modern Office" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">Modern Office</button>
                            <button data-bg="Abstract Gradient" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">Abstract Gradient</button>
                            <button data-bg="DigiTech" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">DigiTech</button>
                            <button data-bg="Cityvibe" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">Cityvibe</button>
<label for="custom-bg-upload" class="w-full text-left p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer block">Choose From Source...</label>
                            <input type="file" id="custom-bg-upload" class="hidden" accept="image/*">
                        </div>
                    </div>
                </div>

                <button id="mobile-menu-button" class="md:hidden p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="#home" class="block py-2 px-6 text-sm hover:bg-gray-200 dark:hover:bg-gray-700">Home</a>
            <a href="#about" class="block py-2 px-6 text-sm hover:bg-gray-200 dark:hover:bg-gray-700">About</a>
            <a href="#skills" class="block py-2 px-6 text-sm hover:bg-gray-200 dark:hover:bg-gray-700">Skills</a>
            <a href="#projects" class="block py-2 px-6 text-sm hover:bg-gray-200 dark:hover:bg-gray-700">Projects</a>
            <a href="#achievements" class="block py-2 px-6 text-sm hover:bg-gray-200 dark:hover:bg-gray-700">Achievements</a>
            <a href="#contact" class="block py-2 px-6 text-sm hover:bg-gray-200 dark:hover:bg-gray-700">Contact</a>
        </div>
    </header>

    <main class="container mx-auto px-6 pt-24">
        <!-- Home Section -->
        <section id="home" class="min-h-screen flex flex-col items-center justify-center text-center bg-cover bg-center transition-all duration-500">
            <div class="flex flex-col-reverse md:flex-row items-center justify-center w-full">
                <div class="md:w-1/2 text-center md:text-left">
                    <h1 class="text-4xl md:text-6xl font-bold mb-4"><span class="waving-hand mr-3">&#x1F44B;</span>Hi, I'm <span class="text-primary">Nitin Sharma</span></h1>
                    <p class="text-lg md:text-2xl mb-6">A Passionate Data Analyst Engineer</p>
                    <p class="max-w-xl mx-auto md:mx-0 mb-8 text-gray-600 dark:text-gray-400">
                        I transform complex data into actionable business insights. Turning raw numbers into beautiful and intuitive visualizations is my passion.
                    </p>
                    <div class="flex justify-center md:justify-start space-x-4">
                        <a href="#contact" class="bg-primary text-white px-6 py-3 rounded-md hover:bg-primary-dark transition">Contact Me</a>
                        <a href="assets/NitinSharma-Resume-2025.pdf" download class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition">Download CV</a>
                    </div>
                </div>
                <div class="md:w-1/2 flex justify-center mb-10 md:mb-0">
                    <div class="relative group w-48 h-48 md:w-56 md:h-56">
                        <div class="rgb-border w-full h-full">
                            <img id="profile-pic" src="https://placehold.co/400x400/EFEFEF/AAAAAA?text=Profile+Pic" alt="Profile Picture" class="rounded-full w-full h-full object-cover bg-white dark:bg-gray-900 p-1">
                        </div>
                        <label for="upload-photo" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer">
                            <i data-lucide="camera" class="w-8 h-8 text-white"></i>
                            <input type="file" id="upload-photo" class="hidden" accept="image/*">
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <!-- View My Work Section -->
        <section class="text-center py-16">
            <a href="#about" class="inline-block animate-bounce">
                <div class="flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-primary transition-colors">
                    <span class="font-semibold">View my Work 💼</span>
                    <i data-lucide="arrow-down" class="w-5 h-5"></i>
                </div>
            </a>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20">
            <div class="flex justify-between items-center mb-12">
                <h2 class="text-3xl font-bold text-center flex-grow text-primary">About Me</h2>
                <button id="suggest-bio-btn" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark flex items-center gap-2">
                    <span class="sparkle-emoji">✨</span> Suggest a New Bio
                </button>
            </div>
            <div class="flex flex-col md:flex-row items-center gap-10">
                <div class="md:w-2/3">
                    <h3 class="text-2xl font-semibold mb-4 text-primary">Who I Am</h3>
                    <p id="about-me-text-1" class="text-gray-600 dark:text-gray-400 mb-4">
                        Hello! I'm Nitin Sharma, a results-oriented and proactive learner with excellent time management and problem-solving skills. I combine strategic thinking with hands-on experience to deliver impactful solutions and enhance organizational performance & growth.
                    </p>
                    <p id="about-me-text-2" class="text-gray-600 dark:text-gray-400">
                        I am committed to leveraging these qualities to drive team success in an organisation. When I'm not analyzing data, I enjoy exploring new technologies and contributing to data science communities.
                    </p>
                </div>
                <div class="md:w-1/3 relative group">
                    <div id="about-media-container" class="rounded-lg shadow-xl overflow-hidden aspect-square">
                        <video class="w-full h-full object-cover" autoplay loop muted playsinline>
                            <source src="assets/Ai-powered_marketing_tools_abstract.webm" type="video/webm">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <label for="about-media-upload" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer rounded-lg">
                        <i data-lucide="upload" class="w-10 h-10 text-white"></i>
                        <input type="file" id="about-media-upload" class="hidden" accept="image/*,video/*,image/gif">
                    </label>
                </div>
            </div>
        </section>

        <!-- Dynamic sections will be injected here by JS -->

        <!-- Modal -->
        <div id="modal" class="modal-backdrop">
            <div class="modal-content bg-white dark:bg-gray-800 w-11/12 md:max-w-md mx-auto rounded-lg shadow-lg p-6 relative">
                 <h3 id="modal-title" class="text-2xl font-bold mb-4"></h3>
                 <form id="modal-form">
                     <!-- Form fields will be injected here -->
                 </form>
                 <div class="flex justify-end gap-4 mt-6">
                      <button id="modal-cancel" type="button" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500">Cancel</button>
                      <button id="modal-save" type="button" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark">Save</button>
                 </div>
                 <button onclick="closeModal()" class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                 </button>
            </div>
        </div>
        
        <!-- AI Suggestion Modal -->
        <div id="ai-modal" class="modal-backdrop">
            <div class="modal-content bg-white dark:bg-gray-800 w-11/12 md:max-w-xl mx-auto rounded-lg shadow-lg p-6 relative">
                 <h3 id="ai-modal-title" class="text-2xl font-bold mb-4 flex items-center gap-2"><span class="sparkle-emoji">✨</span> AI Suggestions</h3>
                 <div id="ai-modal-body">
                     <!-- AI content will be injected here -->
                 </div>
                 <div id="ai-modal-loader" class="text-center py-8 hidden">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"></div>
                    <p class="mt-4">Generating ideas...</p>
                 </div>
                 <div class="flex justify-end gap-4 mt-6">
                      <button id="ai-modal-close" type="button" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500">Close</button>
                 </div>
            </div>
        </div>

    </main>

    <!-- Let's Connect Section -->
    <section id="contact" class="py-20 container mx-auto px-6">
         <h2 class="text-3xl font-bold text-center mb-12 text-primary">Let's Connect</h2>
         <div class="max-w-4xl mx-auto">
            <p class="text-center text-lg text-gray-600 dark:text-gray-400 mb-12">
                I'm always interested in new opportunities and exciting projects. Whether you have a question or just want to say hi, feel free to reach out!
            </p>
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md text-center">
                    <h3 class="font-semibold text-lg mb-2">Email</h3>
                    <a href="mailto:sharmanitin242002@gmail.com" class="text-primary hover:underline">sharmanitin242002@gmail.com</a>
                </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md text-center">
                    <h3 class="font-semibold text-lg mb-2">Phone</h3>
                    <p class="text-gray-600 dark:text-gray-400">+91 8448936008</p>
                </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md text-center">
                    <h3 class="font-semibold text-lg mb-2">Location</h3>
                    <p class="text-gray-600 dark:text-gray-400">New Delhi, India</p>
                </div>
            </div>
            <div class="text-center">
                <h3 class="font-semibold text-lg mb-4">Follow Me</h3>
                <div class="flex justify-center space-x-6">
                    <a href="https://github.com/nikki242002" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-primary"><i data-lucide="github" class="w-8 h-8"></i></a>
                    <a href="https://linkedin.com/in/NITIN-SHARMA242002" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-primary"><i data-lucide="linkedin" class="w-8 h-8"></i></a>
                    <a href="https://x.com/Nikku_2025" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-primary"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 16 16"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.6.75zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633z"/></svg></a>
                    <a href="#" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-primary"><i data-lucide="instagram" class="w-8 h-8"></i></a>
                </div>
            </div>
         </div>
    </section>

    <!-- Send Message Section -->
    <section id="send-message" class="py-20 container mx-auto px-6">
        <div class="flex items-center justify-center gap-4 mb-12">
            <span class="text-3xl">&#x1F4EC;</span>
            <h2 class="text-3xl font-bold text-center text-primary">Send Me a Message</h2>
        </div>

        <div class="max-w-2xl mx-auto bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md">
            <form id="contact-form">
                <div class="mb-6">
                    <label for="name" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Your Name</label>
                    <input type="text" id="name" name="name" class="w-full p-3 rounded-md bg-gray-100 dark:bg-gray-700 border-transparent focus:ring-2 focus:ring-primary" placeholder="John Doe" required>
                </div>
                <div class="mb-6">
                    <label for="email" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Your Email</label>
                    <input type="email" id="email" name="email" class="w-full p-3 rounded-md bg-gray-100 dark:bg-gray-700 border-transparent focus:ring-2 focus:ring-primary" placeholder="john.doe@example.com" required>
                </div>
                <div class="mb-6">
                    <label for="message" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Your Message</label>
                    <textarea id="message" name="message" rows="5" class="w-full p-3 rounded-md bg-gray-100 dark:bg-gray-700 border-transparent focus:ring-2 focus:ring-primary" placeholder="Let's talk about..." required></textarea>
                </div>
                <div class="text-center">
                    <button type="submit" class="bg-primary text-white px-8 py-3 rounded-md hover:bg-primary-dark transition w-full">Send Message</button>
                </div>
            </form>
             <div id="form-success-message" class="hidden mt-6 p-4 text-center text-green-800 bg-green-100 dark:text-green-200 dark:bg-green-900/50 rounded-lg">
                Thank you for your message! I'll get back to you soon.
            </div>
        </div>
    </section>

    <!-- Info Footer -->
    <footer class="bg-white dark:bg-gray-800 py-16 border-t border-gray-200 dark:border-gray-700">
        <div class="container mx-auto px-6 grid md:grid-cols-3 gap-8 text-gray-600 dark:text-gray-400">
            <div>
                <h3 class="text-2xl font-bold text-primary mb-2">Nitin Sharma</h3>
                <p>Data Analyst Engineer passionate about transforming complex data into actionable business insights and strategic recommendations.</p>
            </div>
            <div>
                <h3 class="text-xl font-semibold mb-2">Quick Links</h3>
                <ul>
                    <li><a href="#about" class="hover:text-primary hover:underline">About</a></li>
                    <li><a href="#skills" class="hover:text-primary hover:underline">Skills</a></li>
                    <li><a href="#projects" class="hover:text-primary hover:underline">Projects</a></li>
                    <li><a href="#contact" class="hover:text-primary hover:underline">Contact</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-xl font-semibold mb-2">Expertise</h3>
                <ul>
                    <li>Data Analysis</li>
                    <li>Business Intelligence</li>
                    <li>Predictive Modeling</li>
                    <li>Data Visualization</li>
                </ul>
            </div>
        </div>
        <div class="container mx-auto px-6 mt-12 pt-6 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row justify-between items-center text-sm text-gray-500">
            <p>Made with ❤️ by Nitin Sharma</p>
            <p>&copy; 2025 Nitin Sharma. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- DATA STORE ---
        // Data populated from Nitin Sharma's Resume
        let data = {
            skills: [
                { id: 1, title: 'Languages', description: 'C, HTML, CSS, Python, Javascript' },
                { id: 2, title: 'Python Libraries', description: 'Numpy, Matplotlib, Pandas, Seaborn' },
                { id: 3, title: 'Databases', description: 'MySQL' },
                { id: 4, title: 'Analysis Tools', description: 'Power BI, Tableau, MS Excel' },
                { id: 5, title: 'Developer Tools', description: 'VS Code, Github, Pycharm, Jupyter Notebook' },
            ],
            projects: [
                { id: 1, title: 'Property Sales Analysis', description: 'Visually represent the data on Property Sales Analysis in different sectors & states and created a dashboard app (using Numpy, Pandas, Plotly, Streamlit library in python.)', image: 'https://lottiefiles.com/free-animation/real-estate-oS4reo2QCj', link: 'https://github.com/nikki242002' },
            ],
            achievements: [
                 { id: 1, title: 'CodeKaze 2024 Participant', description: 'Participated in the coding competition & had a valuable experience to enhance the code skills.', issuer: 'Code 360 (Codingninjas)', date: '2024-09-01' },
            ],
            certificates: [
                { id: 1, title: 'Data Visualization: DANLC', description: 'Certificate in Data Visualization.', issuer: 'Anudeep Foundation', date: '', link: '#' },
                { id: 2, title: 'Tata Crucible Campus Quiz 2024', description: 'Achieved Level (Round) 2 Winner status.', issuer: 'Unstop', date: '2024-01-01', link: '#'},
                { id: 3, title: 'Data Analytics Job Simulation', description: 'Completed a virtual job simulation focused on data analytics.', issuer: 'Deloitte Australia [Forage]', date: '2025-01-01', link: '#' },
            ],
            courses: [
                { id: 1, title: 'Data Analytics', description: 'Gained hands-on experience on Data visualization tools, Analyses techniques like (cleaning, transforming, managing and predicting models) using python & lib, Ms-Excel, sql.', issuer: 'Anudeep Foundation', date: '2025-03-01', link: '#' },
            ],
        };

        const sectionFields = {
            skills: [ { name: 'title', label: 'Skill Category', type: 'text' }, { name: 'description', label: 'Details (comma-separated)', type: 'textarea' } ],
            projects: [ { name: 'title', label: 'Project Title', type: 'text' }, { name: 'description', label: 'Description', type: 'textarea' }, { name: 'image', label: 'Image URL', type: 'text' }, { name: 'link', label: 'Project Link', type: 'text' } ],
            achievements: [ { name: 'title', label: 'Achievement Title', type: 'text' }, { name: 'description', label: 'Description', type: 'textarea' }, { name: 'issuer', label: 'Issuer', type: 'text' }, { name: 'date', label: 'Date', type: 'date' } ],
            certificates: [ { name: 'title', label: 'Certificate Name', type: 'text' }, { name: 'description', label: 'Description', type: 'textarea' }, { name: 'issuer', label: 'Issuer', type: 'text' }, { name: 'date', label: 'Date', type: 'date' }, { name: 'link', label: 'Certificate Link', type: 'text' } ],
            courses: [ { name: 'title', label: 'Course Name', type: 'text' }, { name: 'description', label: 'Description', type: 'textarea' }, { name: 'issuer', label: 'Issuer', type: 'text' }, { name: 'date', label: 'Date', type: 'date' }, { name: 'link', label: 'Course Link', type: 'text' } ],
        };
        
        // --- DYNAMIC SECTION CREATION ---
        function createSection(id, title, items) {
            const mainContent = document.querySelector('main');
            const aboutSection = document.getElementById('about');
            const section = document.createElement('section');
            section.id = id;
            section.className = 'py-20';
            
            let content = `
                <div class="flex justify-between items-center mb-12">
                     <h2 class="text-3xl font-bold text-center flex-grow text-primary">${title}</h2>
                     <button onclick="openModal('${id}')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark flex items-center gap-2">
                         <i data-lucide="plus" class="w-5 h-5"></i> Add New
                     </button>
                </div>
                <div id="${id}-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            `;
            
            content += '</div>';
            section.innerHTML = content;
            // Insert after the About section
            aboutSection.parentNode.insertBefore(section, aboutSection.nextSibling);

            items.forEach(item => renderCard(id, item));
        }
        
        function renderCard(sectionId, item) {
            const grid = document.getElementById(`${sectionId}-grid`);
            const card = document.createElement('div');
            card.className = 'card bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md';
            card.dataset.id = item.id;
            
            let cardContent = '';
            if(item.image) cardContent += `<img src="${item.image}" alt="${item.title}" class="rounded-md mb-4 h-40 w-full object-cover">`;
            cardContent += `<h3 class="text-xl font-bold mb-2 text-primary">${item.title}</h3>`;
            if(item.description) cardContent += `<p class="text-gray-600 dark:text-gray-400 mb-4">${item.description}</p>`;
            if(item.issuer) cardContent += `<p class="text-sm text-gray-500 dark:text-gray-300"><em>Issued by: ${item.issuer}</em></p>`;
            if(item.date) cardContent += `<p class="text-sm text-gray-500 dark:text-gray-300"><em>Date: ${item.date}</em></p>`;
            if(item.link) cardContent += `<a href="${item.link}" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline mt-4 inline-block">View Details</a>`;
            
            cardContent += `
                <div class="mt-4 flex justify-end space-x-2">
                    <button onclick="openModal('${sectionId}', ${item.id})" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                       <i data-lucide="edit-2" class="w-5 h-5 text-blue-500"></i>
                    </button>
                    <button onclick="deleteItem('${sectionId}', ${item.id})" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                       <i data-lucide="trash-2" class="w-5 h-5 text-red-500"></i>
                    </button>
                </div>
            `;
            card.innerHTML = cardContent;
            grid.appendChild(card);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Apply saved theme and background from localStorage
            const savedTheme = localStorage.getItem('portfolio-theme') || 'theme-indigo';
            document.documentElement.className = ''; 
            if(localStorage.getItem('color-theme') === 'dark') document.documentElement.classList.add('dark');
            document.documentElement.classList.add(savedTheme);

            const savedBgKey = localStorage.getItem('portfolio-bg') || 'default';
            applyBackground(savedBgKey);

            // Create dynamic sections
            createSection('skills', 'My Skills', data.skills);
            createSection('projects', 'My Projects', data.projects);
            createSection('achievements', 'Achievements', data.achievements);
            createSection('certificates', 'Certificates', data.certificates);
            createSection('courses', 'Courses', data.courses);
            
            // Initialize icons
            lucide.createIcons();
        });

        // --- CRUD OPERATIONS & MODAL LOGIC ---
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalForm = document.getElementById('modal-form');
        const modalCancel = document.getElementById('modal-cancel');
        const modalSave = document.getElementById('modal-save');
        let currentSection = null;
        let currentItemId = null;
        
        function openModal(sectionId, itemId = null) {
            currentSection = sectionId;
            currentItemId = itemId;
            modalForm.innerHTML = '';
            
            const fields = sectionFields[sectionId];
            const isEditing = itemId !== null;
            const item = isEditing ? data[sectionId].find(i => i.id === itemId) : {};

            modalTitle.textContent = `${isEditing ? 'Edit' : 'Add'} ${sectionId.slice(0, -1)}`;

            fields.forEach(field => {
                const value = item[field.name] || '';
                const inputGroup = document.createElement('div');
                inputGroup.className = 'mb-4';
                const label = document.createElement('label');
                label.className = 'block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1';
                label.textContent = field.label;

                let input;
                if(field.type === 'textarea') {
                    input = document.createElement('textarea');
                    input.rows = 3;
                    input.value = value;
                } else {
                    input = document.createElement('input');
                    input.type = field.type;
                    input.value = value;
                }
                
                input.name = field.name;
                input.className = 'w-full p-2 rounded-md bg-gray-200 dark:bg-gray-700 border-transparent focus:ring-2 focus:ring-primary';
                inputGroup.appendChild(label);
                inputGroup.appendChild(input);
                modalForm.appendChild(inputGroup);
            });

            // Add Gemini feature for Projects
            if (sectionId === 'projects') {
                const enhanceButton = document.createElement('button');
                enhanceButton.type = 'button';
                enhanceButton.className = 'w-full mt-2 bg-rose-500 text-white px-4 py-2 rounded-lg hover:bg-rose-600 flex items-center justify-center gap-2';
                enhanceButton.innerHTML = `<span class="sparkle-emoji">✨</span> Enhance with AI`;
                enhanceButton.onclick = () => {
                    const title = modalForm.querySelector('input[name="title"]').value;
                    const description = modalForm.querySelector('textarea[name="description"]').value;
                    if (!title) {
                        alert('Please enter a project title first.');
                        return;
                    }
                    getProjectDescriptionSuggestion(title, description);
                };
                modalForm.appendChild(enhanceButton);
            }
            
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        modalCancel.addEventListener('click', closeModal);

        modalSave.addEventListener('click', () => {
            const formData = new FormData(modalForm);
            const newItem = { id: currentItemId !== null ? currentItemId : Date.now() };
            
            for(let [key, value] of formData.entries()) {
                newItem[key] = value;
            }

            if (currentItemId !== null) {
                // Editing
                const index = data[currentSection].findIndex(i => i.id === currentItemId);
                data[currentSection][index] = newItem;
            } else {
                // Adding
                data[currentSection].push(newItem);
            }
            
            // Re-render the whole section
            document.getElementById(`${currentSection}-grid`).innerHTML = '';
            data[currentSection].forEach(item => renderCard(currentSection, item));
            lucide.createIcons();
            closeModal();
        });

        function deleteItem(sectionId, itemId) {
            data[sectionId] = data[sectionId].filter(item => item.id !== itemId);
            // Re-render the grid for the correct section
            document.getElementById(`${sectionId}-grid`).innerHTML = '';
            data[sectionId].forEach(item => renderCard(sectionId, item));
            lucide.createIcons();
        }
        
        // --- PHOTO UPLOAD ---
        document.getElementById('upload-photo').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profile-pic').src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });
        
        // --- ABOUT MEDIA UPLOAD ---
        document.getElementById('about-media-upload').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const container = document.getElementById('about-media-container');
                    container.innerHTML = ''; // Clear previous content

                    if (file.type.startsWith('image/')) {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'w-full h-full object-cover';
                        container.appendChild(img);
                    } else if (file.type.startsWith('video/')) {
                        const video = document.createElement('video');
                        video.className = 'w-full h-full object-cover';
                        video.autoplay = true;
                        video.loop = true;
                        video.muted = true;
                        video.playsInline = true;
                        
                        const source = document.createElement('source');
                        source.src = e.target.result;
                        source.type = file.type;
                        
                        video.appendChild(source);
                        container.appendChild(video);
                    }
                }
                reader.readAsDataURL(file);
            }
        });

        // --- THEME TOGGLE ---
        const themeToggle = document.getElementById('theme-toggle');
        const themeIconLight = document.getElementById('theme-icon-light');
        const themeIconDark = document.getElementById('theme-icon-dark');
        
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            themeIconLight.classList.remove('hidden');
        } else {
            document.documentElement.classList.remove('dark');
            themeIconDark.classList.remove('hidden');
        }

        themeToggle.addEventListener('click', () => {
            themeIconLight.classList.toggle('hidden');
            themeIconDark.classList.toggle('hidden');
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('color-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        });
        
        // --- THEME & BACKGROUND CUSTOMIZER ---
        const themeCustomizerButton = document.getElementById('theme-customizer-button');
        const themeCustomizerMenu = document.getElementById('theme-customizer-menu');
        const customColorPicker = document.getElementById('custom-color-picker');

        themeCustomizerButton.addEventListener('click', (e) => {
            e.stopPropagation();
            themeCustomizerMenu.classList.toggle('hidden');
        });

        document.addEventListener('click', (e) => {
            if (!themeCustomizerMenu.contains(e.target) && !themeCustomizerButton.contains(e.target)) {
                themeCustomizerMenu.classList.add('hidden');
            }
        });

        const backgroundUrls = {
             'default': 'none',
            'Tech Workspace': 'url(\'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHRlY2glMjBvZmZpY2V8ZW58MHx8MHx8fDA%3D\')',
            'Modern Office': 'url(\'https://thumbs.dreamstime.com/b/group-multiethnic-busy-people-working-office-43449815.jpg\')',
            'Abstract Gradient':'url(\'https://cdn1.vectorstock.com/i/1000x1000/83/60/abstract-fluid-gradient-background-vector-28048360.jpg\')',
            'DigiTech': 'url(\'https://png.pngtree.com/background/20210714/original/pngtree-blue-digital-technologi-fingerprint-picture-image_1202902.jpg\')',
            'Cityvibe': 'url(\'https://mit-rd-betterworld.s3.amazonaws.com/prod/wp-content/uploads/2022/01/iStock-1203720647-web.jpg\')'
        };


        function applyBackground(bgKey) {
            const homeSection = document.getElementById('home');
            if (bgKey in backgroundUrls) {
                homeSection.style.backgroundImage = backgroundUrls[bgKey];
                localStorage.setItem('portfolio-bg', bgKey);
            }
        }

        document.getElementById('custom-bg-upload').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const homeSection = document.getElementById('home');
                    homeSection.style.backgroundImage = `url('${e.target.result}')`;
                    localStorage.removeItem('portfolio-bg'); 
                }
                reader.readAsDataURL(file);
            }
        });
        
        function hexToHsl(hex) {
            let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            let r = parseInt(result[1], 16) / 255;
            let g = parseInt(result[2], 16) / 255;
            let b = parseInt(result[3], 16) / 255;
            let max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            if (max == min) {
                h = s = 0; // achromatic
            } else {
                let d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return `${Math.round(h * 360)} ${Math.round(s * 100)}% ${Math.round(l * 100)}%`;
        }

        customColorPicker.addEventListener('input', (e) => {
            const themes = ['theme-indigo', 'theme-teal', 'theme-rose', 'theme-amber', 'theme-violet', 'theme-slate'];
            document.documentElement.classList.remove(...themes);
            document.documentElement.style.setProperty('--color-primary', hexToHsl(e.target.value));
            localStorage.removeItem('portfolio-theme');
        });

        themeCustomizerMenu.addEventListener('click', (e) => {
            const button = e.target.closest('button');
            if (!button) return;

            const theme = button.dataset.theme;
            if (theme) {
                document.documentElement.style.removeProperty('--color-primary');
                const themes = ['theme-indigo', 'theme-teal', 'theme-rose', 'theme-amber', 'theme-violet', 'theme-slate'];
                document.documentElement.classList.remove(...themes);
                document.documentElement.classList.add(theme);
                localStorage.setItem('portfolio-theme', theme);
                return; 
            }
            
            const bgKey = button.dataset.bg;
            if (bgKey) {
               applyBackground(bgKey);
            }
        });

        // --- MOBILE MENU ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- MODAL CLOSE ON ESC or CLICK OUTSIDE ---
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
                closeAiModal();
            }
        });
        
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
            if (event.target === aiModal) {
                closeAiModal();
            }
        });
        
        // --- CONTACT FORM ---
        const contactForm = document.getElementById('contact-form');
        const formSuccessMessage = document.getElementById('form-success-message');

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            formSuccessMessage.classList.remove('hidden');
            contactForm.reset();
            setTimeout(() => {
                formSuccessMessage.classList.add('hidden');
            }, 5000);
        });

        // --- GEMINI API INTEGRATION ---
        const aiModal = document.getElementById('ai-modal');
        const aiModalTitle = document.getElementById('ai-modal-title');
        const aiModalBody = document.getElementById('ai-modal-body');
        const aiModalLoader = document.getElementById('ai-modal-loader');
        const aiModalCloseBtn = document.getElementById('ai-modal-close');
        
        aiModalCloseBtn.addEventListener('click', closeAiModal);

        function showAiModal() {
            aiModal.style.display = 'flex';
        }
        function closeAiModal() {
            aiModal.style.display = 'none';
        }

        async function callGeminiAPI(prompt) {
            aiModalBody.innerHTML = '';
            aiModalLoader.classList.remove('hidden');
            showAiModal();

            const apiKey = ""; // Canvas will provide this
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    return text;
                } else {
                    return "Sorry, I couldn't generate a suggestion. The response was empty.";
                }
            } catch (error) {
                console.error("Gemini API Error:", error);
                return `Sorry, an error occurred while contacting the AI model. Please check the console for details.`;
            } finally {
                aiModalLoader.classList.add('hidden');
            }
        }
        
        // --- Bio Suggester ---
        const suggestBioBtn = document.getElementById('suggest-bio-btn');
        suggestBioBtn.addEventListener('click', async () => {
            const currentBio1 = document.getElementById('about-me-text-1').textContent.trim();
            const currentBio2 = document.getElementById('about-me-text-2').textContent.trim();
            const fullBio = `${currentBio1} ${currentBio2}`;
            
            aiModalTitle.innerHTML = `<span class="sparkle-emoji">✨</span> AI Bio Suggestions`;
            
            const prompt = `Based on the following bio for a Data Analyst Engineer, generate 3 new, distinct bio suggestions. Each suggestion should be a single paragraph and professional in tone. The suggestions should be separated by "---".\n\nCurrent Bio: "${fullBio}"`;
            
            const suggestionsText = await callGeminiAPI(prompt);
            const suggestions = suggestionsText.split('---').map(s => s.trim()).filter(Boolean);
            
            aiModalBody.innerHTML = suggestions.map((suggestion, index) => `
                <div class="mb-4 p-4 border dark:border-gray-600 rounded-lg">
                    <p class="mb-2">${suggestion}</p>
                    <button class="text-sm bg-primary text-white px-3 py-1 rounded-md hover:bg-primary-dark" onclick="useBioSuggestion('${suggestion.replace(/'/g, "\\'")}')">Use this Bio</button>
                </div>
            `).join('');
        });

        function useBioSuggestion(suggestion) {
            const sentences = suggestion.match(/[^.!?]+[.!?]+/g) || [suggestion];
            const midPoint = Math.ceil(sentences.length / 2);
            const firstPart = sentences.slice(0, midPoint).join(' ');
            const secondPart = sentences.slice(midPoint).join(' ');
            
            document.getElementById('about-me-text-1').textContent = firstPart;
            document.getElementById('about-me-text-2').textContent = secondPart;
            closeAiModal();
        }

        // --- Project Description Enhancer ---
        async function getProjectDescriptionSuggestion(title, description) {
            aiModalTitle.innerHTML = `<span class="sparkle-emoji">✨</span> AI Project Description`;
            
            const prompt = `You are a professional technical writer. Enhance the following project description for a data analyst's portfolio.
            Project Title: "${title}"
            Current Description/Notes: "${description}"
            
            Write a single, polished paragraph. Highlight the key technologies used and the project's outcome or purpose. Do not use markdown.`;

            const suggestion = await callGeminiAPI(prompt);
            
            aiModalBody.innerHTML = `
                <div class="p-4 border dark:border-gray-600 rounded-lg">
                    <p id="ai-project-suggestion" class="mb-2">${suggestion}</p>
                    <button class="text-sm bg-primary text-white px-3 py-1 rounded-md hover:bg-primary-dark" onclick="useProjectSuggestion()">Use this Description</button>
                </div>
            `;
        }
        
        function useProjectSuggestion() {
            const suggestionText = document.getElementById('ai-project-suggestion').textContent;
            modalForm.querySelector('textarea[name="description"]').value = suggestionText;
            closeAiModal();
        }
    </script>
</body>
</html>
